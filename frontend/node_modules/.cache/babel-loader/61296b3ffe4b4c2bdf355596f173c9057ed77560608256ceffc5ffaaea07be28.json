{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\prati\\\\Desktop\\\\NASA\\\\frontend\\\\src\\\\AsteroidDefenseGame.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useUser } from './UserContext';\nimport './AsteroidDefenseGame.css';\nimport { useHighContrast } from './HighContrastContext';\n\n// Simple arcade-style asteroid defense game using real NEO data\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GAME_DURATION = 60; // seconds\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n// Voice narration for asteroid facts and game events\nfunction getVoicesAsync() {\n  return new Promise(resolve => {\n    const voices = window.speechSynthesis.getVoices();\n    if (voices.length) return resolve(voices);\n    window.speechSynthesis.onvoiceschanged = () => {\n      const loadedVoices = window.speechSynthesis.getVoices();\n      resolve(loadedVoices);\n    };\n  });\n}\nasync function speak(text, onFail, utterRef) {\n  if ('speechSynthesis' in window) {\n    try {\n      const voices = await getVoicesAsync();\n      if (!voices.length) {\n        if (onFail) onFail(true);\n        return;\n      }\n      // Prefer a female English voice if available\n      let voice = voices.find(v => v.lang && v.lang.startsWith('en') && v.gender === 'female');\n      if (!voice) {\n        // Some browsers do not provide gender, so match by name\n        voice = voices.find(v => v.lang && v.lang.startsWith('en') && v.name && /female|woman|girl|zira|susan|samantha|linda|emma|victoria|karen|allison|julie|lucy|olivia|zoe|amy|joanna|ivy|kimberly|kendra|susan|tessa|vanessa|zoey/i.test(v.name));\n      }\n      if (!voice) {\n        // Fallback to any English voice\n        voice = voices.find(v => v.lang && v.lang.startsWith('en')) || voices[0];\n      }\n      const utter = new window.SpeechSynthesisUtterance(text);\n      if (voice) utter.voice = voice;\n      utter.rate = 1.5; // Set speech rate to 1.5x\n      utter.onerror = () => {\n        if (onFail) onFail(true);\n      };\n      utter.onstart = () => {\n        if (onFail) onFail(false);\n      };\n      if (utterRef) utterRef.current = utter;\n      window.speechSynthesis.speak(utter);\n      if (window.__loggedVoices !== true) {\n        console.log('Available voices:', voices);\n        window.__loggedVoices = true;\n      }\n    } catch (e) {\n      if (onFail) onFail(true);\n    }\n  } else {\n    if (onFail) onFail(true);\n  }\n}\nconst AsteroidDefenseGame = () => {\n  _s();\n  const {\n    awardBadge,\n    logAction\n  } = useUser();\n  const {\n    highContrast\n  } = useHighContrast();\n  const [asteroids, setAsteroids] = useState([]);\n  const [score, setScore] = useState(0);\n  const [gameOver, setGameOver] = useState(false);\n  const [timer, setTimer] = useState(GAME_DURATION);\n  const [showFact, setShowFact] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [factQueue, setFactQueue] = useState([]); // queue for facts\n  const [currentFact, setCurrentFact] = useState(null); // currently displayed fact\n  const [speechError, setSpeechError] = useState(false);\n  const [speechReady, setSpeechReady] = useState(false); // tracks if user has enabled speech\n  const intervalRef = useRef();\n  const utterRef = useRef(); // add this near other refs\n\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n    const backendUrl = process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000';\n    fetch(`${backendUrl}/api/neo?start_date=2025-06-18&end_date=2025-06-18`).then(res => res.json()).then(data => {\n      const neos = Object.values(data.near_earth_objects || {}).flat();\n      setAsteroids(neos.slice(0, 10).map(neo => {\n        var _neo$estimated_diamet, _neo$estimated_diamet2, _neo$estimated_diamet3, _neo$close_approach_d, _neo$close_approach_d2, _neo$close_approach_d3, _neo$close_approach_d4, _neo$close_approach_d5, _neo$close_approach_d6, _neo$close_approach_d7, _neo$close_approach_d8;\n        // Creative fact generation\n        const diameter = (_neo$estimated_diamet = neo.estimated_diameter) === null || _neo$estimated_diamet === void 0 ? void 0 : (_neo$estimated_diamet2 = _neo$estimated_diamet.meters) === null || _neo$estimated_diamet2 === void 0 ? void 0 : (_neo$estimated_diamet3 = _neo$estimated_diamet2.estimated_diameter_max) === null || _neo$estimated_diamet3 === void 0 ? void 0 : _neo$estimated_diamet3.toFixed(1);\n        const miss = (_neo$close_approach_d = neo.close_approach_data) === null || _neo$close_approach_d === void 0 ? void 0 : (_neo$close_approach_d2 = _neo$close_approach_d[0]) === null || _neo$close_approach_d2 === void 0 ? void 0 : (_neo$close_approach_d3 = _neo$close_approach_d2.miss_distance) === null || _neo$close_approach_d3 === void 0 ? void 0 : (_neo$close_approach_d4 = _neo$close_approach_d3.kilometers) === null || _neo$close_approach_d4 === void 0 ? void 0 : _neo$close_approach_d4.split('.')[0];\n        const approach = ((_neo$close_approach_d5 = neo.close_approach_data) === null || _neo$close_approach_d5 === void 0 ? void 0 : (_neo$close_approach_d6 = _neo$close_approach_d5[0]) === null || _neo$close_approach_d6 === void 0 ? void 0 : _neo$close_approach_d6.close_approach_date_full) || ((_neo$close_approach_d7 = neo.close_approach_data) === null || _neo$close_approach_d7 === void 0 ? void 0 : (_neo$close_approach_d8 = _neo$close_approach_d7[0]) === null || _neo$close_approach_d8 === void 0 ? void 0 : _neo$close_approach_d8.close_approach_date);\n        const funFacts = [`Asteroid ${neo.name} zooms by Earth at a distance of ${miss ? miss + ' km' : 'unknown distance'}!`, `Did you know? ${neo.name} is about ${diameter ? diameter + ' meters' : 'unknown size'} wide!`, `Watch out! ${neo.name} made a close approach on ${approach || 'an unknown date'}!`, `Asteroid ${neo.name} is a true space traveler!`, `You just blasted ${neo.name}!`];\n        const factIdx = Math.floor(Math.random() * funFacts.length);\n        return {\n          ...neo,\n          x: getRandomInt(10, 90),\n          y: 0,\n          speed: getRandomInt(1, 3),\n          creativeFact: funFacts[factIdx]\n        };\n      }));\n      setLoading(false);\n    }).catch(() => {\n      setError('Failed to load asteroid data.');\n      setLoading(false);\n    });\n  }, []);\n  useEffect(() => {\n    if (gameOver) return;\n    intervalRef.current = setInterval(() => {\n      setAsteroids(asts => asts.map(a => ({\n        ...a,\n        y: a.y + a.speed\n      })));\n      setTimer(t => {\n        if (t <= 1) {\n          setGameOver(true);\n          clearInterval(intervalRef.current);\n          logAction('Asteroid Defense Game completed!');\n          return 0;\n        }\n        return t - 1;\n      });\n    }, 500);\n    return () => clearInterval(intervalRef.current);\n  }, [gameOver, logAction]);\n  useEffect(() => {\n    if (factQueue.length > 0 && !currentFact) {\n      setCurrentFact(factQueue[0]);\n      setFactQueue(fq => fq.slice(1));\n    }\n  }, [factQueue, currentFact]);\n\n  // Helper to test speech after user gesture\n  const handleTestSpeech = async () => {\n    setSpeechError(false);\n    setSpeechReady(true);\n    await speak('Speech synthesis is working! You will hear asteroid facts during the game.', err => setSpeechError(!!err), utterRef);\n  };\n  useEffect(() => {\n    if (currentFact && speechReady) {\n      // Only speak if user has enabled speech\n      setSpeechError(false); // Clear error before trying\n      speak(currentFact, err => {\n        if (err === true) setSpeechError(true);else setSpeechError(false); // Clear error if speech works\n      }, utterRef);\n      const timer = setTimeout(() => setCurrentFact(null), 2500);\n      return () => clearTimeout(timer);\n    }\n  }, [currentFact, speechReady]);\n\n  // Only speak game over once\n  const hasSpokenGameOver = useRef(false);\n  useEffect(() => {\n    if (gameOver && speechReady && !hasSpokenGameOver.current) {\n      hasSpokenGameOver.current = true;\n      speak('Game Over! Final Score: ' + score);\n      if (score > 0) awardBadge('asteroid-hunter');\n      logAction('Asteroid Defense Game completed!');\n    }\n    if (!gameOver) {\n      hasSpokenGameOver.current = false;\n    }\n  }, [gameOver, score, awardBadge, logAction, speechReady]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `asteroid-game${highContrast ? ' high-contrast' : ''}`,\n    \"aria-label\": \"Asteroid Defense Game\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Asteroid Defense Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        margin: '1rem'\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'salmon',\n        textAlign: 'center',\n        margin: '1rem'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }, this), !loading && !error && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          position: 'absolute',\n          top: 10,\n          right: 10,\n          zIndex: 20,\n          padding: '8px 18px',\n          background: '#23243a',\n          color: '#ffd700',\n          border: 'none',\n          borderRadius: 6,\n          cursor: 'pointer',\n          boxShadow: '0 2px 8px #0008'\n        },\n        onClick: handleTestSpeech,\n        \"aria-label\": \"Test Speech Synthesis\",\n        children: \"Test Speech\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-area\",\n        tabIndex: 0,\n        \"aria-label\": \"Game Area\",\n        children: asteroids.map(a => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"asteroid\",\n          style: {\n            left: `${a.x}%`,\n            top: `${a.y}%`\n          },\n          tabIndex: 0,\n          \"aria-label\": 'Asteroid ' + a.name,\n          onClick: () => {\n            setScore(s => s + 1);\n            setFactQueue(fq => [...fq, a.creativeFact]);\n            setAsteroids(asts => asts.filter(ast => ast.id !== a.id));\n          },\n          onKeyDown: e => {\n            if (e.key === 'Enter' || e.key === ' ') {\n              setScore(s => s + 1);\n              setFactQueue(fq => [...fq, a.creativeFact]);\n              setAsteroids(asts => asts.filter(ast => ast.id !== a.id));\n            }\n          },\n          children: \"\\uD83E\\uDEA8\"\n        }, a.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scoreboard\",\n        children: [\"Score: \", score, \" | Time Left: \", timer, \"s\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this), currentFact && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fact-toast\",\n        style: {\n          position: 'absolute',\n          top: 10,\n          left: '50%',\n          transform: 'translateX(-50%)',\n          background: '#23243a',\n          color: '#ffd700',\n          padding: '12px 24px',\n          borderRadius: 8,\n          boxShadow: '0 2px 8px #0008',\n          zIndex: 10,\n          transition: 'opacity 0.5s'\n        },\n        children: currentFact\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }, this), gameOver && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-over\",\n        style: {\n          textAlign: 'center',\n          marginTop: 24\n        },\n        children: [\"Game Over! Final Score: \", score, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginTop: 16,\n            padding: '10px 28px',\n            background: '#ffd700',\n            color: '#23243a',\n            border: 'none',\n            borderRadius: 8,\n            fontWeight: 700,\n            fontSize: 18,\n            cursor: 'pointer',\n            boxShadow: '0 2px 8px #0008'\n          },\n          onClick: () => {\n            setGameOver(false);\n            setScore(0);\n            setTimer(GAME_DURATION);\n            setAsteroids([]);\n            setFactQueue([]);\n            setCurrentFact(null);\n            setShowFact(null);\n            setError(null);\n            setLoading(true);\n            // Re-fetch asteroids\n            const backendUrl = process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000';\n            fetch(`${backendUrl}/api/neo?start_date=2025-06-18&end_date=2025-06-18`).then(res => res.json()).then(data => {\n              const neos = Object.values(data.near_earth_objects || {}).flat();\n              setAsteroids(neos.slice(0, 10).map(neo => {\n                var _neo$estimated_diamet4, _neo$estimated_diamet5, _neo$estimated_diamet6, _neo$close_approach_d9, _neo$close_approach_d0, _neo$close_approach_d1, _neo$close_approach_d10, _neo$close_approach_d11, _neo$close_approach_d12, _neo$close_approach_d13, _neo$close_approach_d14;\n                const diameter = (_neo$estimated_diamet4 = neo.estimated_diameter) === null || _neo$estimated_diamet4 === void 0 ? void 0 : (_neo$estimated_diamet5 = _neo$estimated_diamet4.meters) === null || _neo$estimated_diamet5 === void 0 ? void 0 : (_neo$estimated_diamet6 = _neo$estimated_diamet5.estimated_diameter_max) === null || _neo$estimated_diamet6 === void 0 ? void 0 : _neo$estimated_diamet6.toFixed(1);\n                const miss = (_neo$close_approach_d9 = neo.close_approach_data) === null || _neo$close_approach_d9 === void 0 ? void 0 : (_neo$close_approach_d0 = _neo$close_approach_d9[0]) === null || _neo$close_approach_d0 === void 0 ? void 0 : (_neo$close_approach_d1 = _neo$close_approach_d0.miss_distance) === null || _neo$close_approach_d1 === void 0 ? void 0 : (_neo$close_approach_d10 = _neo$close_approach_d1.kilometers) === null || _neo$close_approach_d10 === void 0 ? void 0 : _neo$close_approach_d10.split('.')[0];\n                const approach = ((_neo$close_approach_d11 = neo.close_approach_data) === null || _neo$close_approach_d11 === void 0 ? void 0 : (_neo$close_approach_d12 = _neo$close_approach_d11[0]) === null || _neo$close_approach_d12 === void 0 ? void 0 : _neo$close_approach_d12.close_approach_date_full) || ((_neo$close_approach_d13 = neo.close_approach_data) === null || _neo$close_approach_d13 === void 0 ? void 0 : (_neo$close_approach_d14 = _neo$close_approach_d13[0]) === null || _neo$close_approach_d14 === void 0 ? void 0 : _neo$close_approach_d14.close_approach_date);\n                const funFacts = [`Asteroid ${neo.name} zooms by Earth at a distance of ${miss ? miss + ' km' : 'unknown distance'}!`, `Did you know? ${neo.name} is about ${diameter ? diameter + ' meters' : 'unknown size'} wide!`, `Watch out! ${neo.name} made a close approach on ${approach || 'an unknown date'}!`, `Asteroid ${neo.name} is a true space traveler!`, `You just blasted ${neo.name}!`];\n                const factIdx = Math.floor(Math.random() * funFacts.length);\n                return {\n                  ...neo,\n                  x: getRandomInt(10, 90),\n                  y: 0,\n                  speed: getRandomInt(1, 3),\n                  creativeFact: funFacts[factIdx]\n                };\n              }));\n              setLoading(false);\n            }).catch(() => {\n              setError('Failed to load asteroid data.');\n              setLoading(false);\n            });\n          },\n          children: \"Play Again?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }, this), speechError && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: 50,\n          left: '50%',\n          transform: 'translateX(-50%)',\n          background: '#ffb347',\n          color: '#23243a',\n          padding: '10px 20px',\n          borderRadius: 8,\n          boxShadow: '0 2px 8px #0008',\n          zIndex: 11\n        },\n        children: \"Speech not supported or blocked. Please check your browser settings to enable audio narration.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n};\n_s(AsteroidDefenseGame, \"VNsig7ax0y5zhyD5ZMjeA4xOaqQ=\", false, function () {\n  return [useUser, useHighContrast];\n});\n_c = AsteroidDefenseGame;\nexport default AsteroidDefenseGame;\nvar _c;\n$RefreshReg$(_c, \"AsteroidDefenseGame\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useUser","useHighContrast","jsxDEV","_jsxDEV","Fragment","_Fragment","GAME_DURATION","getRandomInt","min","max","Math","floor","random","getVoicesAsync","Promise","resolve","voices","window","speechSynthesis","getVoices","length","onvoiceschanged","loadedVoices","speak","text","onFail","utterRef","voice","find","v","lang","startsWith","gender","name","test","utter","SpeechSynthesisUtterance","rate","onerror","onstart","current","__loggedVoices","console","log","e","AsteroidDefenseGame","_s","awardBadge","logAction","highContrast","asteroids","setAsteroids","score","setScore","gameOver","setGameOver","timer","setTimer","showFact","setShowFact","loading","setLoading","error","setError","factQueue","setFactQueue","currentFact","setCurrentFact","speechError","setSpeechError","speechReady","setSpeechReady","intervalRef","backendUrl","process","env","REACT_APP_BACKEND_URL","fetch","then","res","json","data","neos","Object","values","near_earth_objects","flat","slice","map","neo","_neo$estimated_diamet","_neo$estimated_diamet2","_neo$estimated_diamet3","_neo$close_approach_d","_neo$close_approach_d2","_neo$close_approach_d3","_neo$close_approach_d4","_neo$close_approach_d5","_neo$close_approach_d6","_neo$close_approach_d7","_neo$close_approach_d8","diameter","estimated_diameter","meters","estimated_diameter_max","toFixed","miss","close_approach_data","miss_distance","kilometers","split","approach","close_approach_date_full","close_approach_date","funFacts","factIdx","x","y","speed","creativeFact","catch","setInterval","asts","a","t","clearInterval","fq","handleTestSpeech","err","setTimeout","clearTimeout","hasSpokenGameOver","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","textAlign","margin","color","position","top","right","zIndex","padding","background","border","borderRadius","cursor","boxShadow","onClick","tabIndex","left","s","filter","ast","id","onKeyDown","key","transform","transition","marginTop","fontWeight","fontSize","_neo$estimated_diamet4","_neo$estimated_diamet5","_neo$estimated_diamet6","_neo$close_approach_d9","_neo$close_approach_d0","_neo$close_approach_d1","_neo$close_approach_d10","_neo$close_approach_d11","_neo$close_approach_d12","_neo$close_approach_d13","_neo$close_approach_d14","_c","$RefreshReg$"],"sources":["C:/Users/prati/Desktop/NASA/frontend/src/AsteroidDefenseGame.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { useUser } from './UserContext';\r\nimport './AsteroidDefenseGame.css';\r\nimport { useHighContrast } from './HighContrastContext';\r\n\r\n// Simple arcade-style asteroid defense game using real NEO data\r\nconst GAME_DURATION = 60; // seconds\r\n\r\nfunction getRandomInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\n// Voice narration for asteroid facts and game events\r\nfunction getVoicesAsync() {\r\n  return new Promise(resolve => {\r\n    const voices = window.speechSynthesis.getVoices();\r\n    if (voices.length) return resolve(voices);\r\n    window.speechSynthesis.onvoiceschanged = () => {\r\n      const loadedVoices = window.speechSynthesis.getVoices();\r\n      resolve(loadedVoices);\r\n    };\r\n  });\r\n}\r\n\r\nasync function speak(text, onFail, utterRef) {\r\n  if ('speechSynthesis' in window) {\r\n    try {\r\n      const voices = await getVoicesAsync();\r\n      if (!voices.length) {\r\n        if (onFail) onFail(true);\r\n        return;\r\n      }\r\n      // Prefer a female English voice if available\r\n      let voice = voices.find(v => v.lang && v.lang.startsWith('en') && v.gender === 'female');\r\n      if (!voice) {\r\n        // Some browsers do not provide gender, so match by name\r\n        voice = voices.find(v => v.lang && v.lang.startsWith('en') && v.name && /female|woman|girl|zira|susan|samantha|linda|emma|victoria|karen|allison|julie|lucy|olivia|zoe|amy|joanna|ivy|kimberly|kendra|susan|tessa|vanessa|zoey/i.test(v.name));\r\n      }\r\n      if (!voice) {\r\n        // Fallback to any English voice\r\n        voice = voices.find(v => v.lang && v.lang.startsWith('en')) || voices[0];\r\n      }\r\n      const utter = new window.SpeechSynthesisUtterance(text);\r\n      if (voice) utter.voice = voice;\r\n      utter.rate = 1.5; // Set speech rate to 1.5x\r\n      utter.onerror = () => { if (onFail) onFail(true); };\r\n      utter.onstart = () => { if (onFail) onFail(false); };\r\n      if (utterRef) utterRef.current = utter;\r\n      window.speechSynthesis.speak(utter);\r\n      if (window.__loggedVoices !== true) {\r\n        console.log('Available voices:', voices);\r\n        window.__loggedVoices = true;\r\n      }\r\n    } catch (e) {\r\n      if (onFail) onFail(true);\r\n    }\r\n  } else {\r\n    if (onFail) onFail(true);\r\n  }\r\n}\r\n\r\nconst AsteroidDefenseGame = () => {\r\n  const { awardBadge, logAction } = useUser();\r\n  const { highContrast } = useHighContrast();\r\n  const [asteroids, setAsteroids] = useState([]);\r\n  const [score, setScore] = useState(0);\r\n  const [gameOver, setGameOver] = useState(false);\r\n  const [timer, setTimer] = useState(GAME_DURATION);\r\n  const [showFact, setShowFact] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [factQueue, setFactQueue] = useState([]); // queue for facts\r\n  const [currentFact, setCurrentFact] = useState(null); // currently displayed fact\r\n  const [speechError, setSpeechError] = useState(false);\r\n  const [speechReady, setSpeechReady] = useState(false); // tracks if user has enabled speech\r\n  const intervalRef = useRef();\r\n  const utterRef = useRef(); // add this near other refs\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(null);\r\n    const backendUrl = process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000';\r\n    fetch(`${backendUrl}/api/neo?start_date=2025-06-18&end_date=2025-06-18`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        const neos = Object.values(data.near_earth_objects || {}).flat();\r\n        setAsteroids(neos.slice(0, 10).map(neo => {\r\n          // Creative fact generation\r\n          const diameter = neo.estimated_diameter?.meters?.estimated_diameter_max?.toFixed(1);\r\n          const miss = neo.close_approach_data?.[0]?.miss_distance?.kilometers?.split('.')[0];\r\n          const approach = neo.close_approach_data?.[0]?.close_approach_date_full || neo.close_approach_data?.[0]?.close_approach_date;\r\n          const funFacts = [\r\n            `Asteroid ${neo.name} zooms by Earth at a distance of ${miss ? miss + ' km' : 'unknown distance'}!`,\r\n            `Did you know? ${neo.name} is about ${diameter ? diameter + ' meters' : 'unknown size'} wide!`,\r\n            `Watch out! ${neo.name} made a close approach on ${approach || 'an unknown date'}!`,\r\n            `Asteroid ${neo.name} is a true space traveler!`,\r\n            `You just blasted ${neo.name}!`];\r\n          const factIdx = Math.floor(Math.random() * funFacts.length);\r\n          return {\r\n            ...neo,\r\n            x: getRandomInt(10, 90),\r\n            y: 0,\r\n            speed: getRandomInt(1, 3),\r\n            creativeFact: funFacts[factIdx],\r\n          };\r\n        }));\r\n        setLoading(false);\r\n      })\r\n      .catch(() => {\r\n        setError('Failed to load asteroid data.');\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (gameOver) return;\r\n    intervalRef.current = setInterval(() => {\r\n      setAsteroids(asts => asts.map(a => ({ ...a, y: a.y + a.speed })));\r\n      setTimer(t => {\r\n        if (t <= 1) {\r\n          setGameOver(true);\r\n          clearInterval(intervalRef.current);\r\n          logAction('Asteroid Defense Game completed!');\r\n          return 0;\r\n        }\r\n        return t - 1;\r\n      });\r\n    }, 500);\r\n    return () => clearInterval(intervalRef.current);\r\n  }, [gameOver, logAction]);\r\n\r\n  useEffect(() => {\r\n    if (factQueue.length > 0 && !currentFact) {\r\n      setCurrentFact(factQueue[0]);\r\n      setFactQueue(fq => fq.slice(1));\r\n    }\r\n  }, [factQueue, currentFact]);\r\n\r\n  // Helper to test speech after user gesture\r\n  const handleTestSpeech = async () => {\r\n    setSpeechError(false);\r\n    setSpeechReady(true);\r\n    await speak(\r\n      'Speech synthesis is working! You will hear asteroid facts during the game.',\r\n      (err) => setSpeechError(!!err),\r\n      utterRef\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (currentFact && speechReady) { // Only speak if user has enabled speech\r\n      setSpeechError(false); // Clear error before trying\r\n      speak(currentFact, (err) => {\r\n        if (err === true) setSpeechError(true);\r\n        else setSpeechError(false); // Clear error if speech works\r\n      }, utterRef);\r\n      const timer = setTimeout(() => setCurrentFact(null), 2500);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [currentFact, speechReady]);\r\n\r\n  // Only speak game over once\r\n  const hasSpokenGameOver = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (gameOver && speechReady && !hasSpokenGameOver.current) {\r\n      hasSpokenGameOver.current = true;\r\n      speak('Game Over! Final Score: ' + score);\r\n      if (score > 0) awardBadge('asteroid-hunter');\r\n      logAction('Asteroid Defense Game completed!');\r\n    }\r\n    if (!gameOver) {\r\n      hasSpokenGameOver.current = false;\r\n    }\r\n  }, [gameOver, score, awardBadge, logAction, speechReady]);\r\n\r\n  return (\r\n    <div className={`asteroid-game${highContrast ? ' high-contrast' : ''}`} aria-label=\"Asteroid Defense Game\">\r\n      <h2>Asteroid Defense Game</h2>\r\n      {loading && <div style={{ textAlign: 'center', margin: '1rem' }}>Loading...</div>}\r\n      {error && <div style={{ color: 'salmon', textAlign: 'center', margin: '1rem' }}>{error}</div>}\r\n      {!loading && !error && (\r\n        <>\r\n          <button\r\n            style={{position:'absolute',top:10,right:10,zIndex:20,padding:'8px 18px',background:'#23243a',color:'#ffd700',border:'none',borderRadius:6,cursor:'pointer',boxShadow:'0 2px 8px #0008'}}\r\n            onClick={handleTestSpeech}\r\n            aria-label=\"Test Speech Synthesis\"\r\n          >\r\n            Test Speech\r\n          </button>\r\n          <div className=\"game-area\" tabIndex={0} aria-label=\"Game Area\">\r\n            {asteroids.map((a) => (\r\n              <div\r\n                key={a.id}\r\n                className=\"asteroid\"\r\n                style={{ left: `${a.x}%`, top: `${a.y}%` }}\r\n                tabIndex={0}\r\n                aria-label={'Asteroid ' + a.name}\r\n                onClick={() => {\r\n                  setScore(s => s + 1);\r\n                  setFactQueue(fq => [...fq, a.creativeFact]);\r\n                  setAsteroids(asts => asts.filter(ast => ast.id !== a.id));\r\n                }}\r\n                onKeyDown={e => {\r\n                  if (e.key === 'Enter' || e.key === ' ') {\r\n                    setScore(s => s + 1);\r\n                    setFactQueue(fq => [...fq, a.creativeFact]);\r\n                    setAsteroids(asts => asts.filter(ast => ast.id !== a.id));\r\n                  }\r\n                }}\r\n              >\r\n                ðŸª¨\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"scoreboard\">\r\n            Score: {score} | Time Left: {timer}s\r\n          </div>\r\n          {currentFact && (\r\n            <div className=\"fact-toast\" style={{position:'absolute',top:10,left:'50%',transform:'translateX(-50%)',background:'#23243a',color:'#ffd700',padding:'12px 24px',borderRadius:8,boxShadow:'0 2px 8px #0008',zIndex:10,transition:'opacity 0.5s'}}>\r\n              {currentFact}\r\n            </div>\r\n          )}\r\n          {gameOver && (\r\n            <div className=\"game-over\" style={{textAlign:'center',marginTop:24}}>\r\n              Game Over! Final Score: {score}\r\n              <br />\r\n              <button\r\n                style={{marginTop:16,padding:'10px 28px',background:'#ffd700',color:'#23243a',border:'none',borderRadius:8,fontWeight:700,fontSize:18,cursor:'pointer',boxShadow:'0 2px 8px #0008'}}\r\n                onClick={() => {\r\n                  setGameOver(false);\r\n                  setScore(0);\r\n                  setTimer(GAME_DURATION);\r\n                  setAsteroids([]);\r\n                  setFactQueue([]);\r\n                  setCurrentFact(null);\r\n                  setShowFact(null);\r\n                  setError(null);\r\n                  setLoading(true);\r\n                  // Re-fetch asteroids\r\n                  const backendUrl = process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000';\r\n                  fetch(`${backendUrl}/api/neo?start_date=2025-06-18&end_date=2025-06-18`)\r\n                    .then(res => res.json())\r\n                    .then(data => {\r\n                      const neos = Object.values(data.near_earth_objects || {}).flat();\r\n                      setAsteroids(neos.slice(0, 10).map(neo => {\r\n                        const diameter = neo.estimated_diameter?.meters?.estimated_diameter_max?.toFixed(1);\r\n                        const miss = neo.close_approach_data?.[0]?.miss_distance?.kilometers?.split('.')[0];\r\n                        const approach = neo.close_approach_data?.[0]?.close_approach_date_full || neo.close_approach_data?.[0]?.close_approach_date;\r\n                        const funFacts = [\r\n                          `Asteroid ${neo.name} zooms by Earth at a distance of ${miss ? miss + ' km' : 'unknown distance'}!`,\r\n                          `Did you know? ${neo.name} is about ${diameter ? diameter + ' meters' : 'unknown size'} wide!`,\r\n                          `Watch out! ${neo.name} made a close approach on ${approach || 'an unknown date'}!`,\r\n                          `Asteroid ${neo.name} is a true space traveler!`,\r\n                          `You just blasted ${neo.name}!`];\r\n                        const factIdx = Math.floor(Math.random() * funFacts.length);\r\n                        return {\r\n                          ...neo,\r\n                          x: getRandomInt(10, 90),\r\n                          y: 0,\r\n                          speed: getRandomInt(1, 3),\r\n                          creativeFact: funFacts[factIdx],\r\n                        };\r\n                      }));\r\n                      setLoading(false);\r\n                    })\r\n                    .catch(() => {\r\n                      setError('Failed to load asteroid data.');\r\n                      setLoading(false);\r\n                    });\r\n                }}\r\n              >\r\n                Play Again?\r\n              </button>\r\n            </div>\r\n          )}\r\n          {speechError && (\r\n            <div style={{position:'absolute',top:50,left:'50%',transform:'translateX(-50%)',background:'#ffb347',color:'#23243a',padding:'10px 20px',borderRadius:8,boxShadow:'0 2px 8px #0008',zIndex:11}}>\r\n              Speech not supported or blocked. Please check your browser settings to enable audio narration.\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AsteroidDefenseGame;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}